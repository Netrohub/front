import{j as t}from"./ui-8LkqUuQ1.js";import{r as p}from"./vendor-DH0FW2o-.js";import{$ as C,T as D}from"./index-BXMhu9HI.js";import{D as N,C as m}from"./ConfirmDialog-DB6HcN8r.js";import{m as b,U as x,a7 as g,h as w,B as f}from"./index-DJ-Zc7gD.js";import{a as M}from"./router-DNfABZAc.js";import{f as R}from"./utils-BladrqYR.js";import"./table-8L0bK-M7.js";import"./ellipsis-D_jF052c.js";import"./eye-eHhB2xYa.js";import"./square-pen-DgF4O29M.js";import"./trash-2-D_VMLyqA.js";import"./chevron-left-CIsvNeiC.js";import"./forms-DPxY1lef.js";function K(){const d=M(),{toast:i}=b(),[o,a]=p.useState({open:!1,disputeId:null}),[r,n]=p.useState({open:!1,disputeId:null}),{data:s,isLoading:h,refetch:l}=C({resource:"disputes",pagination:{current:1,pageSize:10}}),{mutate:c}=D(),v=e=>{a({open:!0,disputeId:e})},y=e=>{n({open:!0,disputeId:e})},j=()=>{o.disputeId&&c({resource:"disputes",id:o.disputeId,values:{state:"in_review"}},{onSuccess:()=>{i({title:"Moderator Assigned",description:"A moderator has been assigned to this dispute."}),l()},onError:()=>{i({title:"Error",description:"Failed to assign moderator.",variant:"destructive"})}}),a({open:!1,disputeId:null})},k=()=>{r.disputeId&&c({resource:"disputes",id:r.disputeId,values:{state:"resolved"}},{onSuccess:()=>{i({title:"Dispute Resolved",description:"The dispute has been marked as resolved."}),l()},onError:()=>{i({title:"Error",description:"Failed to resolve dispute.",variant:"destructive"})}}),n({open:!1,disputeId:null})},I=[{key:"id",title:"ID",dataIndex:"id",render:e=>`#${e}`},{key:"order_id",title:"Order",dataIndex:"order_id",render:e=>t.jsxs(w,{variant:"link",onClick:()=>d(`/admin/orders/${e}`),className:"p-0 h-auto",children:["Order #",e]})},{key:"type",title:"Type",dataIndex:"type",render:e=>t.jsx(f,{variant:"outline",className:"capitalize",children:e})},{key:"state",title:"Status",dataIndex:"state",render:e=>t.jsx(f,{variant:e==="resolved"?"default":e==="in_review"?"secondary":"destructive",className:"capitalize",children:e.replace("_"," ")})},{key:"buyer",title:"Buyer",dataIndex:"buyer",render:e=>t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:e.name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})},{key:"amount",title:"Amount",dataIndex:"amount",render:e=>`$${e.toFixed(2)}`},{key:"created_at",title:"Created",dataIndex:"created_at",render:e=>R(new Date(e),"MMM dd, yyyy")}],A=[{label:"Assign Moderator",onClick:()=>u("Assign Moderator"),icon:t.jsx(x,{className:"h-4 w-4"})},{label:"Resolve",onClick:()=>u("Resolve"),icon:t.jsx(g,{className:"h-4 w-4"})}],u=e=>{i({title:"Bulk Action",description:`${e} applied to selected disputes.`})};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Disputes"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage customer disputes and resolutions"})]})}),t.jsx(N,{data:(s==null?void 0:s.data)||[],columns:I,loading:h,pagination:{current:1,pageSize:10,total:(s==null?void 0:s.total)||0,onChange:(e,S)=>{}},actions:{view:e=>d(`/admin/disputes/${e.id}`),custom:[{label:"Assign Moderator",onClick:e=>v(e.id),icon:t.jsx(x,{className:"h-4 w-4"})},{label:"Resolve",onClick:e=>y(e.id),icon:t.jsx(g,{className:"h-4 w-4"})}]},bulkActions:A}),t.jsx(m,{open:o.open,onOpenChange:e=>a({open:e,disputeId:null}),title:"Assign Moderator",description:"Are you sure you want to assign a moderator to this dispute?",confirmText:"Assign",onConfirm:j}),t.jsx(m,{open:r.open,onOpenChange:e=>n({open:e,disputeId:null}),title:"Resolve Dispute",description:"Are you sure you want to mark this dispute as resolved?",confirmText:"Resolve",onConfirm:k})]})}export{K as default};
