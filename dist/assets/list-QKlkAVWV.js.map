{"version":3,"file":"list-QKlkAVWV.js","sources":["../../node_modules/lucide-react/dist/esm/icons/user-x.js","../../src/features/users/list.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst UserX = createLucideIcon(\"UserX\", [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }],\n  [\"line\", { x1: \"17\", x2: \"22\", y1: \"8\", y2: \"13\", key: \"3nzzx3\" }],\n  [\"line\", { x1: \"22\", x2: \"17\", y1: \"8\", y2: \"13\", key: \"1swrse\" }]\n]);\n\nexport { UserX as default };\n//# sourceMappingURL=user-x.js.map\n","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { DataTable, Column } from '@/components/ui/DataTable';\r\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { toast } from 'sonner';\r\nimport { format } from 'date-fns';\r\nimport { User, Shield, UserX } from 'lucide-react';\r\nimport { useAdminList } from '@/hooks/useAdminList';\r\nimport { useAdminMutation } from '@/hooks/useAdminMutation';\r\n\r\ninterface User {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  role: string;\r\n  status: 'active' | 'inactive' | 'suspended';\r\n  created_at: string;\r\n}\r\n\r\nfunction UsersList() {\r\n  const navigate = useNavigate();\r\n  const [deleteDialog, setDeleteDialog] = useState<{\r\n    open: boolean;\r\n    userId: number | null;\r\n  }>({ open: false, userId: null });\r\n  const [selectedRows, setSelectedRows] = useState<string[]>([]);\r\n\r\n  const { data, isLoading } = useAdminList<User>({\r\n    endpoint: '/users',\r\n    initialSearchTerm: '',\r\n  });\r\n\r\n  const { remove } = useAdminMutation<User>({\r\n    endpoint: '/users',\r\n    invalidateQueries: ['admin-list', '/users'],\r\n  });\r\n\r\n  const handleDelete = (userId: number) => {\r\n    setDeleteDialog({ open: true, userId });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (deleteDialog.userId) {\r\n      try {\r\n        await remove(deleteDialog.userId);\r\n        toast.success('User deleted', {\r\n          description: 'User has been successfully deleted.',\r\n        });\r\n      } catch (error: any) {\r\n        console.error('Failed to delete user:', error);\r\n        // Error is already handled by the hook\r\n      }\r\n    }\r\n    setDeleteDialog({ open: false, userId: null });\r\n  };\r\n\r\n  const handleBulkAction = (action: string) => {\r\n    if (selectedRows.length === 0) return;\r\n    \r\n    toast.info('Bulk Action', {\r\n      description: `${action} applied to ${selectedRows.length} users.`,\r\n    });\r\n  };\r\n\r\n  const columns: Column<User>[] = [\r\n    {\r\n      key: 'name',\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      render: (value, record) => (\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\r\n            <User className=\"h-4 w-4 text-primary\" />\r\n          </div>\r\n          <div>\r\n            <p className=\"font-medium\">{record.name}</p>\r\n            <p className=\"text-sm text-muted-foreground\">{record.email}</p>\r\n          </div>\r\n        </div>\r\n      ),\r\n    },\r\n    {\r\n      key: 'role',\r\n      title: 'Role',\r\n      dataIndex: 'role',\r\n      render: (value) => (\r\n        <Badge variant=\"secondary\" className=\"capitalize\">\r\n          {value}\r\n        </Badge>\r\n      ),\r\n    },\r\n    {\r\n      key: 'status',\r\n      title: 'Status',\r\n      dataIndex: 'status',\r\n      render: (value) => (\r\n        <Badge \r\n          variant={value === 'active' ? 'default' : 'destructive'}\r\n          className=\"capitalize\"\r\n        >\r\n          {value}\r\n        </Badge>\r\n      ),\r\n    },\r\n    {\r\n      key: 'created_at',\r\n      title: 'Created',\r\n      dataIndex: 'created_at',\r\n      render: (value) => format(new Date(value), 'MMM dd, yyyy'),\r\n    },\r\n  ];\r\n\r\n  const bulkActions = [\r\n    {\r\n      label: 'Deactivate',\r\n      onClick: () => handleBulkAction('Deactivate'),\r\n      icon: <UserX className=\"h-4 w-4\" />,\r\n    },\r\n    {\r\n      label: 'Impersonate',\r\n      onClick: () => handleBulkAction('Impersonate'),\r\n      icon: <Shield className=\"h-4 w-4\" />,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-foreground\">Users</h1>\r\n          <p className=\"text-muted-foreground\">Manage user accounts and permissions</p>\r\n        </div>\r\n        <Button onClick={() => navigate('/admin/users/create')}>\r\n          Add User\r\n        </Button>\r\n      </div>\r\n\r\n      <DataTable\r\n        data={data || []}\r\n        columns={columns}\r\n        loading={isLoading}\r\n        pagination={{\r\n          current: 1,\r\n          pageSize: 10,\r\n          total: data?.length || 0,\r\n          onChange: (page, pageSize) => {\r\n            // Handle pagination\r\n          },\r\n        }}\r\n        rowSelection={{\r\n          selectedRowKeys: selectedRows,\r\n          onChange: setSelectedRows,\r\n        }}\r\n        actions={{\r\n          view: (record) => navigate(`/admin/users/${record.id}`),\r\n          edit: (record) => navigate(`/admin/users/${record.id}/edit`),\r\n          delete: handleDelete,\r\n        }}\r\n        bulkActions={bulkActions}\r\n      />\r\n\r\n      <ConfirmDialog\r\n        open={deleteDialog.open}\r\n        onOpenChange={(open) => setDeleteDialog({ open, userId: null })}\r\n        title=\"Delete User\"\r\n        description=\"Are you sure you want to delete this user? This action cannot be undone.\"\r\n        confirmText=\"Delete\"\r\n        variant=\"destructive\"\r\n        onConfirm={confirmDelete}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UsersList;\r\n"],"names":["UserX","createLucideIcon","UsersList","navigate","useNavigate","deleteDialog","setDeleteDialog","useState","selectedRows","setSelectedRows","data","isLoading","useAdminList","remove","useAdminMutation","handleDelete","userId","confirmDelete","toast","error","handleBulkAction","action","columns","value","record","jsxDEV","User","Badge","format","bulkActions","Shield","Button","DataTable","page","pageSize","ConfirmDialog","open"],"mappings":"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","x_google_ignoreList":[0]}