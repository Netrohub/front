import{j as s,ae as l,B as u}from"./index-DGKoLoXk.js";import{r as m}from"./vendor-DYST_Hub.js";import{D as E,C as c}from"./ConfirmDialog-JVL3kqA1.js";import{u as y}from"./useAdminList-B67Euu_P.js";import{u as w}from"./useAdminMutation-C8TQKoK3.js";import{a as g}from"./router-BZ748ZSO.js";import{C as f}from"./credit-card-DEpMgRdK.js";import{R as p}from"./rotate-ccw-BBclgC42.js";import{f as O}from"./utils-BCmzG2VI.js";import"./ui-HbKNFvzy.js";import"./forms-Dh6SYEjz.js";import"./table-BpzMYTIs.js";import"./LoadingSpinner-C4iNaT-P.js";import"./EmptyState-nJVhNRR6.js";import"./ellipsis-DYaqh8bt.js";import"./eye-DJY30Wt3.js";import"./square-pen-BpuzX3Js.js";import"./trash-2-CbEYosZr.js";import"./chevron-left-CxrIamxw.js";import"./triangle-alert-O3bii5Zv.js";function H(){const N=g(),[t,n]=m.useState({open:!1,orderId:null}),[o,a]=m.useState({open:!1,orderId:null}),{data:r,isLoading:x}=y({endpoint:"/orders",initialSearchTerm:""}),{update:d}=w({endpoint:"/orders",invalidateQueries:["admin-list","/orders"]}),h=e=>{n({open:!0,orderId:e})},b=e=>{a({open:!0,orderId:e})},D=async()=>{if(t.orderId)try{await d(t.orderId,{escrow_status:"released"}),l.success("Escrow Released",{description:"Funds have been released to the seller."})}catch(e){console.error("Failed to release escrow:",e)}n({open:!1,orderId:null})},C=async()=>{if(o.orderId)try{await d(o.orderId,{escrow_status:"refunded"}),l.success("Refund Processed",{description:"Order has been refunded to the buyer."})}catch(e){console.error("Failed to process refund:",e)}a({open:!1,orderId:null})},k=[{key:"buyer",title:"Buyer",dataIndex:"buyer",render:e=>s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:95,columnNumber:11},this),s.jsxDEV("p",{className:"text-sm text-muted-foreground",children:e.email},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:96,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:94,columnNumber:9},this)},{key:"seller",title:"Seller",dataIndex:"seller",render:e=>s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:106,columnNumber:11},this),s.jsxDEV("p",{className:"text-sm text-muted-foreground",children:e.email},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:107,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:105,columnNumber:9},this)},{key:"amount",title:"Amount",dataIndex:"amount",render:e=>`$${e.toFixed(2)}`},{key:"escrow_status",title:"Escrow Status",dataIndex:"escrow_status",render:e=>s.jsxDEV(u,{variant:e==="released"?"default":e==="held"?"secondary":e==="refunded"?"destructive":"outline",className:"capitalize",children:e},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:122,columnNumber:9},this)},{key:"dispute_flag",title:"Dispute",dataIndex:"dispute_flag",render:e=>s.jsxDEV(u,{variant:e?"destructive":"secondary",children:e?"Yes":"No"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:139,columnNumber:9},this)},{key:"created_at",title:"Created",dataIndex:"created_at",render:e=>O(new Date(e),"MMM dd, yyyy")}],v=[{label:"Release Escrow",onClick:()=>i("Release Escrow"),icon:s.jsxDEV(f,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:156,columnNumber:13},this)},{label:"Process Refund",onClick:()=>i("Process Refund"),icon:s.jsxDEV(p,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:161,columnNumber:13},this)}],i=e=>{l.info("Bulk Action",{description:`${e} applied to selected orders.`})};return s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-3xl font-bold text-foreground",children:"Orders"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:175,columnNumber:11},this),s.jsxDEV("p",{className:"text-muted-foreground",children:"Manage orders and escrow transactions"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:176,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:174,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:173,columnNumber:7},this),s.jsxDEV(E,{data:r||[],columns:k,loading:x,pagination:{current:1,pageSize:10,total:(r==null?void 0:r.length)||0,onChange:(e,j)=>{}},actions:{view:e=>N(`/admin/orders/${e.id}`),custom:[{label:"Release Escrow",onClick:e=>h(e.id),icon:s.jsxDEV(f,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:198,columnNumber:21},this)},{label:"Refund",onClick:e=>b(e.id),icon:s.jsxDEV(p,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:203,columnNumber:21},this)}]},bulkActions:v},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:180,columnNumber:7},this),s.jsxDEV(c,{open:t.open,onOpenChange:e=>n({open:e,orderId:null}),title:"Release Escrow",description:"Are you sure you want to release the escrow funds to the seller? This action cannot be undone.",confirmText:"Release",onConfirm:D},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:210,columnNumber:7},this),s.jsxDEV(c,{open:o.open,onOpenChange:e=>a({open:e,orderId:null}),title:"Process Refund",description:"Are you sure you want to refund this order to the buyer? This action cannot be undone.",confirmText:"Refund",variant:"destructive",onConfirm:C},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:219,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:172,columnNumber:5},this)}export{H as default};
//# sourceMappingURL=list-CMH78j0j.js.map
