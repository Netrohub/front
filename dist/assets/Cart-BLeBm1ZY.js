import{j as e}from"./ui-8LkqUuQ1.js";import{r as I}from"./vendor-DH0FW2o-.js";import{u as $,m as E,J as T,K as L,S as B,N as P,C as n,L as d,h as l,B as R,I as z,O as A,F as q}from"./index-DJ-Zc7gD.js";import{L as m}from"./router-DNfABZAc.js";import{T as O}from"./trash-2-D_VMLyqA.js";import{T as U}from"./tag-CVwk6T7_.js";import"./utils-BladrqYR.js";import"./forms-DPxY1lef.js";const _=()=>{const{t}=$(),{toast:o}=E(),[c,x]=I.useState(""),{data:a,isLoading:D}=T(),p=L(),i=(a==null?void 0:a.items)||[],C=(a==null?void 0:a.subtotal)||0,w=(a==null?void 0:a.service_fee)||0,k=(a==null?void 0:a.total)||0,F=s=>{p.mutate(s,{onSuccess:()=>{o({title:"Item removed",description:"Item has been removed from your cart."})}})},S=async()=>{if(!c.trim()){o({title:"Error",description:"Please enter a coupon code.",variant:"destructive"});return}try{const r={WELCOME10:{discount:10,type:"percentage"},SAVE20:{discount:20,type:"percentage"},FIRST5:{discount:5,type:"dollar"}}[c.toUpperCase()];if(!r)throw new Error("Invalid coupon code");o({title:"Coupon applied!",description:`Coupon "${c.toUpperCase()}" has been applied. ${r.discount}${r.type==="percentage"?"%":"$"} discount.`}),x("")}catch(s){o({title:"Invalid Coupon",description:s.message||"Please check with admin for valid coupons.",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen flex flex-col relative",children:[e.jsx(B,{}),e.jsx(P,{}),e.jsx("main",{className:"flex-1 relative z-10 py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent mb-2",children:t("shoppingCart")}),e.jsxs("p",{className:"text-foreground/60",children:[i.length," ",t("itemsInCart")]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.length===0?e.jsx(n,{className:"glass-card p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(d,{className:"h-12 w-12 text-foreground/40"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-foreground/60 mb-4",children:"Add some products to get started!"}),e.jsx(l,{asChild:!0,children:e.jsxs(m,{to:"/products",children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),t("continueShopping")]})})]})]})}):i.map(s=>{var r,h,u,g,j,f,v,b,N,y;return e.jsx(n,{className:"glass-card p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-24 h-24 rounded-lg overflow-hidden border border-border/50",children:e.jsx("img",{src:((h=(r=s.product)==null?void 0:r.images)==null?void 0:h[0])||((u=s.product)==null?void 0:u.image)||"https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&q=80",alt:((g=s.product)==null?void 0:g.title)||((j=s.product)==null?void 0:j.name)||"Product",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-foreground mb-1 line-clamp-1",children:((f=s.product)==null?void 0:f.title)||((v=s.product)==null?void 0:v.name)||"Product"}),e.jsxs("p",{className:"text-sm text-foreground/60",children:["by ",((N=(b=s.product)==null?void 0:b.seller)==null?void 0:N.name)||"Seller"]}),e.jsx(R,{variant:"secondary",className:"mt-2 bg-primary/10 text-primary border-primary/20",children:((y=s.product)==null?void 0:y.category)||"Category"})]}),e.jsx(l,{size:"icon",variant:"ghost",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>F(s.id),disabled:p.isPending,children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("span",{className:"text-sm text-foreground/60",children:["Quantity: ",s.quantity]}),e.jsxs("p",{className:"text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:["$",s.price.toFixed(2)]})]})]})]})},s.id)}),e.jsx(n,{className:"glass-card p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-primary/70"}),e.jsx(z,{placeholder:t("enterCouponCode"),className:"pl-10 glass-card border-border/50",value:c,onChange:s=>x(s.target.value)})]}),e.jsx(l,{variant:"outline",className:"glass-card border-primary/30 hover:border-primary/50",onClick:S,children:t("apply")})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(n,{className:"glass-card p-6 sticky top-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-6",children:t("orderSummary")}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-foreground/70",children:[e.jsx("span",{children:t("subtotal")}),e.jsxs("span",{className:"font-semibold",children:["$",C.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-foreground/70",children:[e.jsxs("span",{children:[t("serviceFee")," (3%)"]}),e.jsxs("span",{className:"font-semibold",children:["$",w.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-border/30 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-foreground",children:t("total")}),e.jsxs("span",{className:"text-2xl font-black bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:["$",k.toFixed(2)]})]})})]}),e.jsx(m,{to:"/checkout",children:e.jsxs(l,{className:"w-full btn-glow mb-3",size:"lg",children:[t("proceedToCheckout"),e.jsx(A,{className:"h-4 w-4 ml-2"})]})}),e.jsx(m,{to:"/products",children:e.jsxs(l,{variant:"outline",className:"w-full glass-card border-border/50",size:"lg",children:[e.jsx(d,{className:"h-4 w-4 mr-2"}),t("continueShopping")]})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border/30 space-y-3 text-sm text-foreground/60",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),e.jsx("span",{children:t("secureCheckout")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),e.jsx("span",{children:t("instantDelivery")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),e.jsx("span",{children:t("moneyBackGuarantee")})]})]})]})})]})]})}),e.jsx(q,{})]})};export{_ as default};
