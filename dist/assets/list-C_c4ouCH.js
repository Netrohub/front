import{n as g,j as s,B as c}from"./index-q4NQAoNv.js";import{r as m}from"./vendor-DnBvEODk.js";import{$ as O,T as w}from"./index-DQvRQJtF.js";import{D as j,C as f}from"./ConfirmDialog-BcUsPFrR.js";import{a as y}from"./router-B69B8wSc.js";import{C as p}from"./credit-card-DlyqP0lj.js";import{R as N}from"./rotate-ccw-CNA5aD4B.js";import{f as L}from"./utils-BladrqYR.js";import"./ui-14bhMVRs.js";import"./forms-CGt9tnos.js";import"./table-CqqnaJpI.js";import"./ellipsis-B-3y9PvW.js";import"./eye-DP_lEPY8.js";import"./square-pen-7NKmlvxG.js";import"./trash-2-Bio2V0Aq.js";import"./chevron-left-MYLaio0W.js";import"./triangle-alert-BuN2a1BL.js";function H(){const x=y(),{toast:t}=g(),[n,o]=m.useState({open:!1,orderId:null}),[a,l]=m.useState({open:!1,orderId:null}),{data:r,isLoading:b,refetch:d}=O({resource:"orders",pagination:{current:1,pageSize:10}}),{mutate:i}=w(),h=e=>{o({open:!0,orderId:e})},D=e=>{l({open:!0,orderId:e})},v=()=>{n.orderId&&i({resource:"orders",id:n.orderId,values:{escrow_status:"released"}},{onSuccess:()=>{t({title:"Escrow Released",description:"Funds have been released to the seller."}),d()},onError:()=>{t({title:"Error",description:"Failed to release escrow.",variant:"destructive"})}}),o({open:!1,orderId:null})},C=()=>{a.orderId&&i({resource:"orders",id:a.orderId,values:{escrow_status:"refunded"}},{onSuccess:()=>{t({title:"Refund Processed",description:"Order has been refunded to the buyer."}),d()},onError:()=>{t({title:"Error",description:"Failed to process refund.",variant:"destructive"})}}),l({open:!1,orderId:null})},k=[{key:"buyer",title:"Buyer",dataIndex:"buyer",render:e=>s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:114,columnNumber:11},this),s.jsxDEV("p",{className:"text-sm text-muted-foreground",children:e.email},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:115,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:113,columnNumber:9},this)},{key:"seller",title:"Seller",dataIndex:"seller",render:e=>s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"font-medium",children:e.name},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:125,columnNumber:11},this),s.jsxDEV("p",{className:"text-sm text-muted-foreground",children:e.email},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:126,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:124,columnNumber:9},this)},{key:"amount",title:"Amount",dataIndex:"amount",render:e=>`$${e.toFixed(2)}`},{key:"escrow_status",title:"Escrow Status",dataIndex:"escrow_status",render:e=>s.jsxDEV(c,{variant:e==="released"?"default":e==="held"?"secondary":e==="refunded"?"destructive":"outline",className:"capitalize",children:e},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:141,columnNumber:9},this)},{key:"dispute_flag",title:"Dispute",dataIndex:"dispute_flag",render:e=>s.jsxDEV(c,{variant:e?"destructive":"secondary",children:e?"Yes":"No"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:158,columnNumber:9},this)},{key:"created_at",title:"Created",dataIndex:"created_at",render:e=>L(new Date(e),"MMM dd, yyyy")}],E=[{label:"Release Escrow",onClick:()=>u("Release Escrow"),icon:s.jsxDEV(p,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:175,columnNumber:13},this)},{label:"Process Refund",onClick:()=>u("Process Refund"),icon:s.jsxDEV(N,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:180,columnNumber:13},this)}],u=e=>{t({title:"Bulk Action",description:`${e} applied to selected orders.`})};return s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-3xl font-bold text-foreground",children:"Orders"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:195,columnNumber:11},this),s.jsxDEV("p",{className:"text-muted-foreground",children:"Manage orders and escrow transactions"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:196,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:194,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:193,columnNumber:7},this),s.jsxDEV(j,{data:(r==null?void 0:r.data)||[],columns:k,loading:b,pagination:{current:1,pageSize:10,total:(r==null?void 0:r.total)||0,onChange:(e,R)=>{}},actions:{view:e=>x(`/admin/orders/${e.id}`),custom:[{label:"Release Escrow",onClick:e=>h(e.id),icon:s.jsxDEV(p,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:218,columnNumber:21},this)},{label:"Refund",onClick:e=>D(e.id),icon:s.jsxDEV(N,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:223,columnNumber:21},this)}]},bulkActions:E},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:200,columnNumber:7},this),s.jsxDEV(f,{open:n.open,onOpenChange:e=>o({open:e,orderId:null}),title:"Release Escrow",description:"Are you sure you want to release the escrow funds to the seller? This action cannot be undone.",confirmText:"Release",onConfirm:v},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:230,columnNumber:7},this),s.jsxDEV(f,{open:a.open,onOpenChange:e=>l({open:e,orderId:null}),title:"Process Refund",description:"Are you sure you want to refund this order to the buyer? This action cannot be undone.",confirmText:"Refund",variant:"destructive",onConfirm:C},void 0,!1,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:239,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/p5l/Desktop/NXOLand/nxoland-frontend/src/features/orders/list.tsx",lineNumber:192,columnNumber:5},this)}export{H as default};
