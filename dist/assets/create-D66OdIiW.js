import{j as e}from"./ui-8LkqUuQ1.js";import{X as C}from"./index-BXMhu9HI.js";import{u as b,b as V,s as x,e as h}from"./forms-DPxY1lef.js";import{ao as S,C as F,h as y,ag as E,m as U,a6 as A,a0 as p,a1 as j,a2 as v,a3 as f,a4 as i}from"./index-DJ-Zc7gD.js";import{a as T}from"./router-DNfABZAc.js";import"./vendor-DH0FW2o-.js";import"./utils-BladrqYR.js";function k({schema:a,defaultValues:r,onSubmit:c,children:d,loading:t=!1,className:n}){const s=b({resolver:a?S(a):void 0,defaultValues:r}),l=s.handleSubmit(async o=>{try{await c(o)}catch(m){console.error("Form submission error:",m)}});return e.jsx(F,{className:`p-6 ${n||""}`,children:e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[d(s),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsxs(y,{type:"submit",disabled:t||!s.formState.isValid,className:"min-w-[120px]",children:[t&&e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Saving...":"Save"]})})]})})}function g({form:a,name:r,label:c,placeholder:d,type:t="text",required:n=!1,disabled:s=!1,className:l,render:o}){const{register:m,formState:{errors:w}}=a,u=w[r];return e.jsxs("div",{className:`space-y-2 ${l||""}`,children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:[c,n&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),o?o(a.register(r)):e.jsx("input",{...m(r),type:t,placeholder:d,disabled:s,className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"}),u&&e.jsx("p",{className:"text-sm text-destructive",children:u.message})]})}const N=V({name:x().min(1,"Name is required"),email:x().email("Invalid email address"),role:h(["admin","moderator","user"]),status:h(["active","inactive","suspended"])});function z(){const a=T(),{toast:r}=U(),{mutate:c,isLoading:d}=C(),t=b({resolver:S(N),defaultValues:{name:"",email:"",role:"user",status:"active"}}),n=s=>{c({resource:"users",values:s},{onSuccess:()=>{r({title:"User created",description:"User has been successfully created."}),a("/admin/users")},onError:()=>{r({title:"Error",description:"Failed to create user.",variant:"destructive"})}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>a("/admin/users"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Create User"}),e.jsx("p",{className:"text-muted-foreground",children:"Add a new user to the system"})]})]}),e.jsx(k,{schema:N,defaultValues:t.getValues(),onSubmit:n,loading:d,children:s=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{form:s,name:"name",label:"Full Name",placeholder:"Enter full name",required:!0}),e.jsx(g,{form:s,name:"email",label:"Email Address",placeholder:"Enter email address",type:"email",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Role ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(p,{value:s.watch("role"),onValueChange:l=>s.setValue("role",l),children:[e.jsx(j,{children:e.jsx(v,{placeholder:"Select role"})}),e.jsxs(f,{children:[e.jsx(i,{value:"admin",children:"Admin"}),e.jsx(i,{value:"moderator",children:"Moderator"}),e.jsx(i,{value:"user",children:"User"})]})]}),s.formState.errors.role&&e.jsx("p",{className:"text-sm text-destructive",children:s.formState.errors.role.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Status ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(p,{value:s.watch("status"),onValueChange:l=>s.setValue("status",l),children:[e.jsx(j,{children:e.jsx(v,{placeholder:"Select status"})}),e.jsxs(f,{children:[e.jsx(i,{value:"active",children:"Active"}),e.jsx(i,{value:"inactive",children:"Inactive"}),e.jsx(i,{value:"suspended",children:"Suspended"})]})]}),s.formState.errors.status&&e.jsx("p",{className:"text-sm text-destructive",children:s.formState.errors.status.message})]})]})]})})]})}export{z as default};
