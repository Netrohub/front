import{j as e}from"./ui-8LkqUuQ1.js";import{r as c}from"./vendor-DH0FW2o-.js";import{c as u,L as f}from"./router-DNfABZAc.js";import{A as j}from"./AccountLayout-Crg4DFY9.js";import{C as n,A as N,a as b,b as v,s as w,U as y,B as g,m as I,h as i,a6 as S,ae as A,af as M}from"./index-DJ-Zc7gD.js";import{T as k}from"./textarea-Cd98j_Ph.js";import{S as C}from"./StatusBadge-CH4pc9aO.js";import{P as D}from"./package-1ExqptJi.js";import{I as E}from"./image-BfZ4adRo.js";import"./sheet-Cg-hKhGh.js";import"./layout-dashboard-NQGphfyQ.js";import"./wallet-pzP2r6KL.js";import"./bell-Cq7S1dTa.js";import"./credit-card-CxEM56tP.js";import"./utils-BladrqYR.js";import"./forms-DPxY1lef.js";const T=({messages:t})=>{const o=s=>{switch(s){case"admin":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"seller":return"bg-blue-500/20 text-blue-400 border-blue-500/30";default:return"bg-primary/20 text-primary border-primary/30"}};return e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsx(n,{className:`glass-card p-4 ${s.isInternal?"border-orange-500/30 bg-orange-500/5":""}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(N,{className:"h-10 w-10 flex-shrink-0",children:s.sender.avatar?e.jsx(b,{src:s.sender.avatar}):e.jsx(v,{children:s.sender.role==="admin"?e.jsx(w,{className:"h-5 w-5"}):e.jsx(y,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-semibold text-foreground",children:s.sender.name}),e.jsx(g,{variant:"outline",className:`text-xs ${o(s.sender.role)}`,children:s.sender.role.charAt(0).toUpperCase()+s.sender.role.slice(1)}),s.isInternal&&e.jsx(g,{variant:"outline",className:"text-xs bg-orange-500/20 text-orange-400 border-orange-500/30",children:"Internal Note"}),e.jsx("span",{className:"text-xs text-foreground/40 ml-auto",children:s.timestamp})]}),e.jsx("p",{className:"text-sm text-foreground/80 leading-relaxed",children:s.content})]})]})},s.id))})},Q=()=>{const{id:t}=u(),{toast:o}=I(),[s,m]=c.useState(""),[x,d]=c.useState([]);c.useEffect(()=>{const r=localStorage.getItem(`dispute_messages_${t}`);if(r)d(JSON.parse(r));else{const l=[{id:"1",sender:{name:"You",role:"buyer"},content:"I purchased this account yesterday but the engagement rate is much lower than advertised. Can you please check?",timestamp:"2 days ago"},{id:"2",sender:{name:"Digital Elite",role:"seller"},content:"Hello, thank you for reaching out. Can you please provide more details about the engagement issues you're experiencing?",timestamp:"1 day ago"},{id:"3",sender:{name:"You",role:"buyer"},content:"I've attached screenshots showing the analytics. The engagement is around 2-3% but your listing stated 8-12%.",timestamp:"1 day ago"}];d(l),localStorage.setItem(`dispute_messages_${t}`,JSON.stringify(l))}},[t]);const a={id:t||"DIS-001",orderId:"ORD-001",productName:"Premium Instagram Account",productImage:"https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=200&q=80",reason:"Product not as described",description:"The account followers are not real as advertised. Engagement rate is very low compared to what was promised in the listing.",status:"open",createdAt:"2 days ago",evidence:[{id:"1",name:"screenshot1.png",url:"https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&q=80"},{id:"2",name:"screenshot2.png",url:"https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=400&q=80"}]},h=()=>{if(!s.trim()){o({title:"Message is empty",description:"Please type a message before sending.",variant:"destructive"});return}const r={id:Date.now().toString(),sender:{name:"You",role:"buyer"},content:s,timestamp:"Just now"},l=[...x,r];d(l),m(""),localStorage.setItem(`dispute_messages_${t}`,JSON.stringify(l)),o({title:"Message sent! ðŸ’¬",description:"Your message has been sent to the dispute thread."})},p=()=>{o({title:"Escalated to admin",description:"This dispute has been escalated for admin review."})};return e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(f,{to:"/disputes",children:e.jsxs(i,{variant:"ghost",className:"gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),"Back to Disputes"]})}),e.jsx(n,{className:"glass-card p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:a.productImage,alt:a.productName,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black text-foreground mb-2",children:a.reason}),e.jsxs("p",{className:"text-foreground/60",children:["Dispute #",a.id," â€¢ Created ",a.createdAt]})]}),e.jsx(C,{status:a.status})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(D,{className:"h-4 w-4 text-foreground/60"}),e.jsxs("span",{className:"text-foreground/60",children:["Order #",a.orderId]}),e.jsx("span",{className:"text-foreground/40",children:"â€¢"}),e.jsx("span",{className:"text-foreground/60",children:a.productName})]})]})]})}),e.jsxs(n,{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-3",children:"Description"}),e.jsx("p",{className:"text-foreground/70 leading-relaxed",children:a.description})]}),a.evidence.length>0&&e.jsxs(n,{className:"glass-card p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-foreground mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Evidence (",a.evidence.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.evidence.map(r=>e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"group",children:e.jsxs(n,{className:"glass-card p-2 overflow-hidden hover:border-primary/40 transition-all",children:[e.jsx("img",{src:r.url,alt:r.name,className:"w-full aspect-square object-cover rounded-lg"}),e.jsx("p",{className:"text-xs text-foreground/60 mt-2 truncate",children:r.name})]})},r.id))})]}),e.jsxs(n,{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Messages"}),e.jsx(T,{messages:x})]}),e.jsxs(n,{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Add Message"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{value:s,onChange:r=>m(r.target.value),placeholder:"Type your message here...",className:"glass-card border-border/50 min-h-[100px]"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(i,{onClick:h,className:"btn-glow",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Send Message"]}),e.jsxs(i,{variant:"outline",className:"glass-card border-orange-500/30 text-orange-400 hover:bg-orange-500/10",onClick:p,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Escalate to Admin"]})]})]})]})]})})};export{Q as default};
